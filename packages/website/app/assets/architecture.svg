<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1510 530" role="img" aria-label="Architecture diagram showing the Preview iframe with Performance decorator, Metric collectors, and browser APIs (requestAnimationFrame, PerformanceObservers, MutationObservers, React Profiler) sending metrics via channel.emit to the Performance panel in the Manager UI">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333" stroke="#333" stroke-width="1"/>
    </marker>
  </defs>

  <!-- Cluster: Preview iframe -->
  <rect fill="#ffffde" stroke="#aaaa33" stroke-width="1" x="293" y="8" width="1208" height="385"/>
  <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="897" y="22">Preview iframe</text>

  <!-- Cluster: Manager UI -->
  <rect fill="#ffffde" stroke="#aaaa33" stroke-width="1" x="8" y="265" width="265" height="257"/>
  <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="141" y="279">Manager UI</text>

  <!-- Node: Performance decorator -->
  <g transform="translate(872, 60)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-112" y="-27" width="224" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">Performance decorator</text>
  </g>

  <!-- Node: Metric collectors -->
  <g transform="translate(872, 164)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-88" y="-27" width="176" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">Metric collectors</text>
  </g>

  <!-- Node: requestAnimationFrame loop -->
  <g transform="translate(579, 329)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-130" y="-39" width="260" height="78"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="-10">requestAnimationFrame</text>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="14">loop</text>
  </g>

  <!-- Node: PerformanceObservers -->
  <g transform="translate(872, 329)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-113" y="-27" width="226" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">PerformanceObservers</text>
  </g>

  <!-- Node: MutationObservers -->
  <g transform="translate(1132, 329)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-98" y="-27" width="196" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">MutationObservers</text>
  </g>

  <!-- Node: React Profiler API -->
  <g transform="translate(1373, 329)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-93" y="-27" width="186" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">React Profiler API</text>
  </g>

  <!-- Node: Performance panel -->
  <g transform="translate(141, 329)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-98" y="-27" width="196" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">Performance panel</text>
  </g>

  <!-- Node: Metric sections -->
  <g transform="translate(141, 470)">
    <rect fill="#ECECFF" stroke="#9370DB" stroke-width="1" x="-83" y="-27" width="166" height="54"/>
    <text font-family="sans-serif" font-size="16" fill="#333" text-anchor="middle" dominant-baseline="central" x="0" y="0">Metric sections</text>
  </g>

  <!-- Edge: Decorator → Collectors -->
  <path stroke="#333" stroke-width="2" fill="none" d="M872,87 L872,133" marker-end="url(#arrow)"/>

  <!-- Edge: Collectors → RAF -->
  <path stroke="#333" stroke-width="2" fill="none" d="M784,183 C715,198 647,213 613,227 C579,240 579,253 579,262 L579,286" marker-end="url(#arrow)"/>

  <!-- Edge: Collectors → PerfObs -->
  <path stroke="#333" stroke-width="2" fill="none" d="M872,191 L872,298" marker-end="url(#arrow)"/>

  <!-- Edge: Collectors → MutObs -->
  <path stroke="#333" stroke-width="2" fill="none" d="M960,186 C1017,200 1075,214 1103,227 C1132,240 1132,253 1132,264 L1132,298" marker-end="url(#arrow)"/>

  <!-- Edge: Collectors → Profiler -->
  <path stroke="#333" stroke-width="2" fill="none" d="M960,175 C1097,193 1235,210 1304,225 C1373,240 1373,253 1373,264 L1373,298" marker-end="url(#arrow)"/>

  <!-- Edge: Panel → Sections -->
  <path stroke="#333" stroke-width="2" fill="none" d="M141,356 L141,439" marker-end="url(#arrow)"/>

  <!-- Edge: Collectors → Panel (with label) -->
  <path stroke="#333" stroke-width="2" fill="none" d="M784,177 C668,194 552,211 494,226 C436,240 436,253 404,266 C371,279 307,293 274,300 L242,307" marker-end="url(#arrow)"/>

  <!-- Edge label: channel.emit(METRICS_UPDATE) -->
  <rect fill="rgba(232,232,232,0.8)" x="313" y="216" width="246" height="24" rx="2"/>
  <text font-family="sans-serif" font-size="14" fill="#333" text-anchor="middle" dominant-baseline="central" x="436" y="228">channel.emit(METRICS_UPDATE)</text>
</svg>
